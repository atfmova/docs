- [مقدمه](#menu)
- [تعریف طرح اشتراک](#menu)
- [لیست طرح های اشتراک](#menu)
- [ویرایش طرح اشتراک](#menu)
- [فعال سازی اشتراک برای کاربر](#menu)
- [درخواست فعال سازی طرح اشتراک](#menu)
- [فعال سازی طرح اشتراک](#menu)
- [لیست اشتراک ها](#menu)
- [ثبت میزان مصرف](#menu)
- [لینک‌های مرتبط](#menu)


## مقدمه

در مواردی ممکن است کسب و کار اقدام به فروش محصولات کسب و کار دیگر نماید یا به هر دلیلی بخشی از مبلغ دریافتی به یک یا چند کسب و کار دیگر تعلق داشته باشد. اهمیت این موضوع در امور مالیاتی مشهود و راه حل آن بسیار ضروری است.برای پرداخت کردن فاکتور ها روش های متفاوتی وجود دارد، که می توان با استفاده از این روش ها فاکتور را پرداخت کرد:توسط سرویس های " ایجاد و مدیریت طرح های اشتراکی " که  در ادامه توضیح داده خواهد شد کسب و کار و مشتریان میتوانند از بسترها و سرویس های یکدیگر بر اساس قوانینی که قابل مدیریت و تعریف شدن میباشد استفاده نمایند و در صورت لزوم مبالغی نیز در ازای استفاده از این امکانات پرداخت نمایند.

<br/>

برای مثال یک کسب و کار میتواند با استفاده از این بخش از " پلتفرم پاد "  فروش بسته های اینترنتی حجمی و ساعتی و یا سرویس های ارزش افزوده که مبنای مالی آنها بر حسب تعدد استفاده و نحوه فراخوانی سرویس ها میباشد را پیاده سازی نماید.

<div class="box-end">
</div>

## تعریف طرح اشتراک

توسط سرویس زیر قادر خواهید بود طرح یا طرح های مورد نیاز خود را تعریف و ایجاد نمایید. دو نوع طرح در این سرویس قابل تعریف است:

<div class="mermaid">
graph TD  
A((شروع))  
A-.->B  
B(ثبت محصول)-.->C  
C(تعریف طرح برای محصول)-.->M 
M((پایان))
</div>

- تعریف طرح برای محصول
- طرح مسدودی: مبلغ طرح در حساب خود مشتری مسدود شده و پس از پایان طرح، باقیمانده ی آن آزاد می گردد. در این نوع قیمت طرح برابر با حداکثر مقدار قابل استفاده توسط مشتری می باشد و محدودیت های تعداد یا مقدار ignore می شوند.

**نکته**
- قبل از ایجاد هر طرح ابتدا باید یک محصول بعنوان مشخصات برای طرح مورد نطر خود ثبت و شناسه (entityId) آن را برای ثبت طرح نگهداری نمایید. این محصول در فاکتورهای مشتری در ارتباط با مصرف طرح، به عنوان محصول خریداری شده ثبت میگردد.
- قیمت محصولی که ثبت میکنید برای طرح در نظر گرفته نخواهد شد و تاثیری در آن ندارد.

|        نام پارامتر        | مقدار قابل ارسال                          |توضحات                         |
|----------------|-------------------------------|-----------------------------|
|periodTypeCode|        SUBSCRIPTION_PLAN_PERIOD_TYPE_YEARLY    |    سالانه    |
|periodTypeCode|         SUBSCRIPTION_PLAN_PERIOD_TYPE_MONTHLY  |      ماهانه    |
|periodTypeCode|         SUBSCRIPTION_PLAN_PERIOD_TYPE_DAILY    |      روزانه    |
|type          |          SUBSCRIPTION_PLAN_TYPE_BLOCK          |      مسدودی    |
|type          |          SUBSCRIPTION_PLAN_TYPE_CASH           |      نقدی    |


<div class="box-end">
</div>


## لیست طرح های اشتراک

توسط سرویس subscriptionPlanList قادر خواهید بود لیست طرح های اشتراکی ثبت شده را مشاهده و براساس فیلترهای مختلف از آنها گزارش تهیه و نمایش دهید.

<div class="box-end">
</div>


## ویرایش طرح اشتراک

توسط سرویس updateSubscriptionPlan قادر خواهید بود طرح های اشتراکی که قبلا تعریف شده را ویرایش نمایید.

<div class="box-end">
</div>



## فعال سازی اشتراک برای کاربر

در فلوچارت زیر نحوه فعال سازی طرح اشتراک برای کاربر نمایش داده شده است.

<br/>

به صورت کلی مراحل به صورت زیر است :

- انتخاب طرح توسط کاربر
- ارسال درخواست فعال سازی طرح
- دریافت کد فعال سازی از کاربر و بررسی کد توسط سرویس confirmSubscription
  کاربر همچنین می توانید با ارسال کد فعال سازی به شماره ایی که کد از آن برایش ارسال شده به صورت خودکار طرح را فعال نماید
- و در مرحله آخر در هر بار مصرف (بسته به نوع نیاز کسب و کار شما) برای کاربر میزان مصرف ثبت شود.

<div class="mermaid">
graph TD  
A((شروع))  
A-.->B  
B(انتخاب طرح توسط کاربر)-.->C  
C(ارسال درخواست فعال سازی طرح برای کاربر)-.->D
D{آیا کد تاییدیه معتبر است}
D-- خیر ---E
E(نمایش خطا)
D-- بله ---F
F(فعال شدن طرح برای کاربر)-.->G
G(ثبت میزان مصرف برای کاربر)-.->M
M((پایان))
</div>

<div class="box-end">
</div>


## درخواست فعال سازی طرح اشتراک

توسط سرویس requestSubscription قادر خواهید بود طرح های اشتراکی که قبلا تعریف شده را ویرایش نمایید.

<div class="box-end">
</div>

## فعال سازی طرح اشتراک

توسط سرویس confirmSubscription و کد دریافتی از کاربر می توانید طرح اشتراک کاربر را فعال نمایید، و عملیات فعال سازی طرح اشتراک را کامل کنید.

<div class="box-end">
</div>


## لیست اشتراک ها
کاربر یا کسب و کار به ازای هربار فعال کردن و استفاده از طرح برایش لیستی از طرح ها ایجاد خواهد شد که توسط سرویس زیر قابل دریافت میباشد

<div class="box-end">
</div>

## ثبت میزان مصرف
توسط سرویس consumeSubscription قادر خواهید بود میزان مصرف خود از طرح های انتخاب شده و درحال استفاده را مشاهده نمایید.

<div class="box-end">
</div>

## لینک‌های مرتبط

- [مقدمه](/app/documents/introduction/)
- [مفاهیم](/app/documents/concepts/)
- [استاندارد و خطاها](/app/documents/errors/)
- [شروع به کار](/app/documents/get-started/)

<div class="box-end">
</div>

